<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Anti-Fraude: Dose Real</title>
    <style>
        :root { 
            --cor-caneta: #2c3e50; 
            --cor-seringa: #3498db; 
            /* Novos tons para o degradê */
            --bg-gradiente: linear-gradient(135deg, #a8e6cf 0%, #dcedc1 50%, #81ecec 100%);
        }

        body { 
            font-family: 'Segoe UI', sans-serif; 
            /* Aplicando o degradê azul e verde claro */
            background: #81ecec;
            background: var(--bg-gradiente);
            background-attachment: fixed;
            display: flex; 
            justify-content: center; 
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px; 
        }

        .container { 
            background: rgba(255, 255, 255, 0.95); 
            padding: 30px; 
            border-radius: 20px; 
            box-shadow: 0 15px 35px rgba(0,0,0,0.1); 
            max-width: 900px; 
            width: 100%; 
        }

        h1 { color: var(--cor-caneta); text-align: center; margin-bottom: 30px; font-weight: 800; }
        
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; }
        
        /* Ajuste nos cards para ficarem mais limpos */
        .card { 
            border: none; 
            padding: 20px; 
            border-radius: 15px; 
            background: #ffffff; 
            position: relative;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }
        
        /* Ilustração da Caneta */
        .pen-container { height: 100px; display: flex; align-items: center; justify-content: center; margin-bottom: 20px; }
        .pen-body { width: 180px; height: 30px; background: var(--cor-caneta); border-radius: 5px 20px 20px 5px; position: relative; }
        .pen-cap { width: 50px; height: 32px; background: #34495e; position: absolute; left: -5px; top: -1px; border-radius: 5px; }
        .pen-window { width: 40px; height: 12px; background: #e0f7fa; position: absolute; right: 35px; top: 9px; border-radius: 2px; border: 1px solid #fff; }
        .pen-button { width: 12px; height: 20px; background: #95a5a6; position: absolute; right: -8px; top: 5px; border-radius: 0 5px 5px 0; }

        label { display: block; margin-bottom: 5px; font-weight: bold; font-size: 14px; color: #555; }
        input, select { width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #dfe6e9; border-radius: 10px; outline: none; transition: 0.3s; }
        input:focus { border-color: #81ecec; box-shadow: 0 0 8px rgba(129, 236, 236, 0.5); }
        
        .syringe-area { text-align: center; }
        canvas { background: #fff; border-radius: 8px; margin-top: 10px; border: 1px solid #f1f1f1; }

        /* Estilo do Box de Resultado */
        .result-box { 
            margin-top: 30px; 
            padding: 25px; 
            background: linear-gradient(135deg, #2ecc71, #27ae60); 
            color: white; 
            border-radius: 12px; 
            text-align: center; 
            font-size: 1.1em; 
            line-height: 1.6;
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
        }
        
        .alert { color: #e74c3c; font-size: 0.85em; margin-top: 10px; font-weight: 600; }

        /* Responsividade para celulares */
        @media (max-width: 600px) {
            .grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Calculadora de Dosagem Real</h1>
    
    <div class="grid">
        <div class="card">
            <div class="pen-container">
                <div class="pen-body">
                    <div class="pen-cap"></div>
                    <div class="pen-window"></div>
                    <div class="pen-button"></div>
                </div>
            </div>
            <h3>Dados da Caneta</h3>
            <label>Volume total (ml):</label>
            <input type="number" id="pen_ml" placeholder="Ex: 3" step="0.1" oninput="calculate()">
            
            <label>Concentração total (mg):</label>
            <input type="number" id="pen_mg" placeholder="Ex: 18" step="0.1" oninput="calculate()">
            <p class="alert">Confirme os mg/ml no rótulo.</p>
        </div>

        <div class="card syringe-area">
            <h3>Seringa de Insulina</h3>
            <label>Capacidade da Seringa:</label>
            <select id="syringe_type" onchange="calculate()">
                <option value="100">100 UI (1.0 ml)</option>
                <option value="50">50 UI (0.5 ml)</option>
            </select>

            <label>Marcação desejada (UI):</label>
            <input type="number" id="dosage_ui" placeholder="Digite as Unidades" oninput="calculate()">
            
            <canvas id="syringeCanvas" width="160" height="280"></canvas>
        </div>
    </div>

    <div class="result-box" id="result">
        Aguardando preenchimento para calcular...
    </div>
</div>

<script>
    function calculate() {
        const mlTotal = parseFloat(document.getElementById('pen_ml').value) || 0;
        const mgTotal = parseFloat(document.getElementById('pen_mg').value) || 0;
        const uiSelected = parseFloat(document.getElementById('dosage_ui').value) || 0;
        const syringeType = parseFloat(document.getElementById('syringe_type').value);

        const mgPerMl = mlTotal > 0 ? (mgTotal / mlTotal) : 0;
        const mlPuxado = uiSelected / 100; // Padrão seringa U-100
        const mgPuxado = mlPuxado * mgPerMl;

        const resultDiv = document.getElementById('result');
        if (mlTotal > 0 && mgTotal > 0 && uiSelected > 0) {
            resultDiv.innerHTML = `Ao aspirar <strong>${uiSelected} UI</strong> nesta seringa, você terá <strong>${mgPuxado.toFixed(2)} mg</strong> da substância.<br><small>(Baseado na caneta de ${mgTotal}mg/${mlTotal}ml)</small>`;
        } else {
            resultDiv.innerHTML = "Insira os dados acima para validar a dose real.";
        }

        drawSyringe(uiSelected, syringeType);
    }

    function drawSyringe(ui, maxUI) {
        const canvas = document.getElementById('syringeCanvas');
        const ctx = canvas.getContext('2d');
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        const startY = 20;
        const height = 220;
        const width = 40;
        const centerX = canvas.width / 2 - width / 2;

        // Corpo
        ctx.strokeStyle = "#b2bec3";
        ctx.lineWidth = 2;
        ctx.strokeRect(centerX, startY, width, height);

        // Líquido (Verde azulado para combinar com o tema)
        let fillLevel = (ui / maxUI) * height;
        if (fillLevel > height) fillLevel = height;
        
        ctx.fillStyle = "#00cec9";
        ctx.fillRect(centerX + 2, (startY + height) - fillLevel, width - 4, fillLevel);

        // Escala
        ctx.fillStyle = "#2d3436";
        ctx.font = "bold 10px Arial";
        ctx.textAlign = "right";
        
        for (let i = 0; i <= maxUI; i += (maxUI/10)) {
            let yPos = (startY + height) - (i / maxUI) * height;
            ctx.beginPath();
            ctx.moveTo(centerX, yPos);
            ctx.lineTo(centerX + 8, yPos);
            ctx.stroke();
            ctx.fillText(i, centerX - 5, yPos + 4);
        }
        
        // Pistão
        ctx.fillStyle = "#636e72";
        ctx.fillRect(centerX + 2, (startY + height) - fillLevel - 6, width - 4, 10);
    }

    window.onload = () => calculate();
</script>

</body>
</html>